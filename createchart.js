var script = document.createElement('script');
script.src = './jquery-1.9.0.min.js';
script.type = 'text/javascript';
document.getElementsByTagName('head')[0].appendChild(script);

var layers = [{"values": [{"y": 25, "x": 0}, {"y": 32, "x": 1}, {"y": 34, "x": 2}, {"y": 22, "x": 3}, {"y": 19, "x": 4}, {"y": 33, "x": 5}, {"y": 10, "x": 6}, {"y": 0, "x": 7}, {"y": 9, "x": 8}, {"y": 17, "x": 9}, {"y": 5, "x": 10}, {"y": 12, "x": 11}, {"y": 3, "x": 12}, {"y": 4, "x": 13}, {"y": 1, "x": 14}, {"y": 1, "x": 15}, {"y": 0, "x": 16}, {"y": 0, "x": 17}, {"y": 1, "x": 18}, {"y": 1, "x": 19}, {"y": 1, "x": 20}, {"y": 28, "x": 21}, {"y": 15, "x": 22}, {"y": 11, "x": 23}, {"y": 22, "x": 24}, {"y": 10, "x": 25}, {"y": 4, "x": 26}, {"y": 4, "x": 27}, {"y": 1, "x": 28}, {"y": 1, "x": 29}, {"y": 0, "x": 30}, {"y": 2, "x": 31}, {"y": 7, "x": 32}, {"y": 2, "x": 33}, {"y": 12, "x": 34}, {"y": 4, "x": 35}, {"y": 1, "x": 36}, {"y": 11, "x": 37}, {"y": 0, "x": 38}, {"y": 18, "x": 39}, {"y": 1, "x": 40}, {"y": 0, "x": 41}, {"y": 0, "x": 42}, {"y": 0, "x": 43}, {"y": 1, "x": 44}, {"y": 1, "x": 45}, {"y": 0, "x": 46}, {"y": 17, "x": 47}, {"y": 10, "x": 48}], "name": "Eels"}, {"values": [{"y": 34, "x": 0}, {"y": 23, "x": 1}, {"y": 29, "x": 2}, {"y": 23, "x": 3}, {"y": 19, "x": 4}, {"y": 13, "x": 5}, {"y": 24, "x": 6}, {"y": 1, "x": 7}, {"y": 10, "x": 8}, {"y": 15, "x": 9}, {"y": 4, "x": 10}, {"y": 12, "x": 11}, {"y": 11, "x": 12}, {"y": 5, "x": 13}, {"y": 1, "x": 14}, {"y": 0, "x": 15}, {"y": 5, "x": 16}, {"y": 1, "x": 17}, {"y": 1, "x": 18}, {"y": 3, "x": 19}, {"y": 7, "x": 20}, {"y": 7, "x": 21}, {"y": 8, "x": 22}, {"y": 2, "x": 23}, {"y": 11, "x": 24}, {"y": 7, "x": 25}, {"y": 42, "x": 26}, {"y": 10, "x": 27}, {"y": 0, "x": 28}, {"y": 3, "x": 29}, {"y": 3, "x": 30}, {"y": 3, "x": 31}, {"y": 3, "x": 32}, {"y": 0, "x": 33}, {"y": 4, "x": 34}, {"y": 18, "x": 35}, {"y": 15, "x": 36}, {"y": 17, "x": 37}, {"y": 13, "x": 38}, {"y": 5, "x": 39}, {"y": 1, "x": 40}, {"y": 0, "x": 41}, {"y": 1, "x": 42}, {"y": 0, "x": 43}, {"y": 2, "x": 44}, {"y": 6, "x": 45}, {"y": 2, "x": 46}, {"y": 0, "x": 47}, {"y": 0, "x": 48}], "name": "Ratatat"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 0, "x": 3}, {"y": 0, "x": 4}, {"y": 0, "x": 5}, {"y": 0, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 0, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 0, "x": 12}, {"y": 2, "x": 13}, {"y": 71, "x": 14}, {"y": 44, "x": 15}, {"y": 14, "x": 16}, {"y": 2, "x": 17}, {"y": 0, "x": 18}, {"y": 11, "x": 19}, {"y": 4, "x": 20}, {"y": 18, "x": 21}, {"y": 20, "x": 22}, {"y": 41, "x": 23}, {"y": 9, "x": 24}, {"y": 18, "x": 25}, {"y": 15, "x": 26}, {"y": 10, "x": 27}, {"y": 5, "x": 28}, {"y": 27, "x": 29}, {"y": 6, "x": 30}, {"y": 7, "x": 31}, {"y": 10, "x": 32}, {"y": 6, "x": 33}, {"y": 4, "x": 34}, {"y": 2, "x": 35}, {"y": 8, "x": 36}, {"y": 8, "x": 37}, {"y": 4, "x": 38}, {"y": 2, "x": 39}, {"y": 2, "x": 40}, {"y": 0, "x": 41}, {"y": 3, "x": 42}, {"y": 0, "x": 43}, {"y": 16, "x": 44}, {"y": 8, "x": 45}, {"y": 16, "x": 46}, {"y": 13, "x": 47}, {"y": 33, "x": 48}], "name": "Beach House"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 0, "x": 3}, {"y": 0, "x": 4}, {"y": 0, "x": 5}, {"y": 0, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 0, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 0, "x": 12}, {"y": 0, "x": 13}, {"y": 0, "x": 14}, {"y": 0, "x": 15}, {"y": 19, "x": 16}, {"y": 16, "x": 17}, {"y": 24, "x": 18}, {"y": 22, "x": 19}, {"y": 32, "x": 20}, {"y": 25, "x": 21}, {"y": 51, "x": 22}, {"y": 31, "x": 23}, {"y": 3, "x": 24}, {"y": 6, "x": 25}, {"y": 5, "x": 26}, {"y": 21, "x": 27}, {"y": 2, "x": 28}, {"y": 6, "x": 29}, {"y": 10, "x": 30}, {"y": 0, "x": 31}, {"y": 7, "x": 32}, {"y": 9, "x": 33}, {"y": 0, "x": 34}, {"y": 0, "x": 35}, {"y": 19, "x": 36}, {"y": 39, "x": 37}, {"y": 39, "x": 38}, {"y": 20, "x": 39}, {"y": 0, "x": 40}, {"y": 0, "x": 41}, {"y": 11, "x": 42}, {"y": 0, "x": 43}, {"y": 18, "x": 44}, {"y": 3, "x": 45}, {"y": 11, "x": 46}, {"y": 35, "x": 47}, {"y": 0, "x": 48}], "name": "The Antlers"}, {"values": [{"y": 23, "x": 0}, {"y": 22, "x": 1}, {"y": 23, "x": 2}, {"y": 15, "x": 3}, {"y": 13, "x": 4}, {"y": 17, "x": 5}, {"y": 5, "x": 6}, {"y": 3, "x": 7}, {"y": 7, "x": 8}, {"y": 9, "x": 9}, {"y": 6, "x": 10}, {"y": 7, "x": 11}, {"y": 2, "x": 12}, {"y": 4, "x": 13}, {"y": 3, "x": 14}, {"y": 8, "x": 15}, {"y": 14, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 36, "x": 19}, {"y": 4, "x": 20}, {"y": 4, "x": 21}, {"y": 21, "x": 22}, {"y": 4, "x": 23}, {"y": 6, "x": 24}, {"y": 21, "x": 25}, {"y": 7, "x": 26}, {"y": 13, "x": 27}, {"y": 4, "x": 28}, {"y": 18, "x": 29}, {"y": 2, "x": 30}, {"y": 5, "x": 31}, {"y": 9, "x": 32}, {"y": 21, "x": 33}, {"y": 0, "x": 34}, {"y": 3, "x": 35}, {"y": 1, "x": 36}, {"y": 2, "x": 37}, {"y": 27, "x": 38}, {"y": 0, "x": 39}, {"y": 1, "x": 40}, {"y": 0, "x": 41}, {"y": 2, "x": 42}, {"y": 1, "x": 43}, {"y": 5, "x": 44}, {"y": 26, "x": 45}, {"y": 11, "x": 46}, {"y": 27, "x": 47}, {"y": 6, "x": 48}], "name": "The Beatles"}, {"values": [{"y": 37, "x": 0}, {"y": 38, "x": 1}, {"y": 38, "x": 2}, {"y": 21, "x": 3}, {"y": 13, "x": 4}, {"y": 13, "x": 5}, {"y": 7, "x": 6}, {"y": 11, "x": 7}, {"y": 7, "x": 8}, {"y": 19, "x": 9}, {"y": 19, "x": 10}, {"y": 18, "x": 11}, {"y": 3, "x": 12}, {"y": 2, "x": 13}, {"y": 5, "x": 14}, {"y": 3, "x": 15}, {"y": 4, "x": 16}, {"y": 1, "x": 17}, {"y": 1, "x": 18}, {"y": 3, "x": 19}, {"y": 0, "x": 20}, {"y": 5, "x": 21}, {"y": 20, "x": 22}, {"y": 2, "x": 23}, {"y": 5, "x": 24}, {"y": 6, "x": 25}, {"y": 6, "x": 26}, {"y": 6, "x": 27}, {"y": 35, "x": 28}, {"y": 8, "x": 29}, {"y": 1, "x": 30}, {"y": 2, "x": 31}, {"y": 13, "x": 32}, {"y": 18, "x": 33}, {"y": 12, "x": 34}, {"y": 1, "x": 35}, {"y": 0, "x": 36}, {"y": 43, "x": 37}, {"y": 2, "x": 38}, {"y": 31, "x": 39}, {"y": 6, "x": 40}, {"y": 0, "x": 41}, {"y": 0, "x": 42}, {"y": 0, "x": 43}, {"y": 3, "x": 44}, {"y": 0, "x": 45}, {"y": 0, "x": 46}, {"y": 0, "x": 47}, {"y": 0, "x": 48}], "name": "The Shins"}, {"values": [{"y": 47, "x": 0}, {"y": 29, "x": 1}, {"y": 31, "x": 2}, {"y": 63, "x": 3}, {"y": 36, "x": 4}, {"y": 17, "x": 5}, {"y": 13, "x": 6}, {"y": 4, "x": 7}, {"y": 5, "x": 8}, {"y": 21, "x": 9}, {"y": 5, "x": 10}, {"y": 13, "x": 11}, {"y": 3, "x": 12}, {"y": 4, "x": 13}, {"y": 2, "x": 14}, {"y": 12, "x": 15}, {"y": 4, "x": 16}, {"y": 7, "x": 17}, {"y": 2, "x": 18}, {"y": 1, "x": 19}, {"y": 8, "x": 20}, {"y": 16, "x": 21}, {"y": 11, "x": 22}, {"y": 10, "x": 23}, {"y": 12, "x": 24}, {"y": 10, "x": 25}, {"y": 5, "x": 26}, {"y": 4, "x": 27}, {"y": 12, "x": 28}, {"y": 2, "x": 29}, {"y": 4, "x": 30}, {"y": 2, "x": 31}, {"y": 5, "x": 32}, {"y": 20, "x": 33}, {"y": 4, "x": 34}, {"y": 1, "x": 35}, {"y": 4, "x": 36}, {"y": 2, "x": 37}, {"y": 14, "x": 38}, {"y": 19, "x": 39}, {"y": 2, "x": 40}, {"y": 0, "x": 41}, {"y": 1, "x": 42}, {"y": 0, "x": 43}, {"y": 10, "x": 44}, {"y": 2, "x": 45}, {"y": 3, "x": 46}, {"y": 2, "x": 47}, {"y": 0, "x": 48}], "name": "The Decemberists"}, {"values": [{"y": 33, "x": 0}, {"y": 16, "x": 1}, {"y": 16, "x": 2}, {"y": 22, "x": 3}, {"y": 20, "x": 4}, {"y": 7, "x": 5}, {"y": 1, "x": 6}, {"y": 7, "x": 7}, {"y": 8, "x": 8}, {"y": 10, "x": 9}, {"y": 14, "x": 10}, {"y": 12, "x": 11}, {"y": 1, "x": 12}, {"y": 3, "x": 13}, {"y": 6, "x": 14}, {"y": 32, "x": 15}, {"y": 13, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 17, "x": 19}, {"y": 16, "x": 20}, {"y": 38, "x": 21}, {"y": 24, "x": 22}, {"y": 12, "x": 23}, {"y": 20, "x": 24}, {"y": 10, "x": 25}, {"y": 6, "x": 26}, {"y": 13, "x": 27}, {"y": 6, "x": 28}, {"y": 2, "x": 29}, {"y": 0, "x": 30}, {"y": 2, "x": 31}, {"y": 26, "x": 32}, {"y": 6, "x": 33}, {"y": 0, "x": 34}, {"y": 11, "x": 35}, {"y": 0, "x": 36}, {"y": 2, "x": 37}, {"y": 0, "x": 38}, {"y": 37, "x": 39}, {"y": 26, "x": 40}, {"y": 0, "x": 41}, {"y": 3, "x": 42}, {"y": 2, "x": 43}, {"y": 3, "x": 44}, {"y": 12, "x": 45}, {"y": 6, "x": 46}, {"y": 0, "x": 47}, {"y": 0, "x": 48}], "name": "Coldplay"}, {"values": [{"y": 1, "x": 0}, {"y": 4, "x": 1}, {"y": 88, "x": 2}, {"y": 72, "x": 3}, {"y": 20, "x": 4}, {"y": 29, "x": 5}, {"y": 5, "x": 6}, {"y": 6, "x": 7}, {"y": 41, "x": 8}, {"y": 12, "x": 9}, {"y": 9, "x": 10}, {"y": 16, "x": 11}, {"y": 5, "x": 12}, {"y": 22, "x": 13}, {"y": 4, "x": 14}, {"y": 29, "x": 15}, {"y": 5, "x": 16}, {"y": 9, "x": 17}, {"y": 1, "x": 18}, {"y": 5, "x": 19}, {"y": 24, "x": 20}, {"y": 21, "x": 21}, {"y": 10, "x": 22}, {"y": 1, "x": 23}, {"y": 22, "x": 24}, {"y": 4, "x": 25}, {"y": 5, "x": 26}, {"y": 4, "x": 27}, {"y": 3, "x": 28}, {"y": 30, "x": 29}, {"y": 0, "x": 30}, {"y": 3, "x": 31}, {"y": 10, "x": 32}, {"y": 2, "x": 33}, {"y": 8, "x": 34}, {"y": 0, "x": 35}, {"y": 8, "x": 36}, {"y": 0, "x": 37}, {"y": 0, "x": 38}, {"y": 20, "x": 39}, {"y": 1, "x": 40}, {"y": 0, "x": 41}, {"y": 1, "x": 42}, {"y": 1, "x": 43}, {"y": 0, "x": 44}, {"y": 3, "x": 45}, {"y": 1, "x": 46}, {"y": 1, "x": 47}, {"y": 0, "x": 48}], "name": "As Tall As Lions"}, {"values": [{"y": 0, "x": 0}, {"y": 21, "x": 1}, {"y": 106, "x": 2}, {"y": 50, "x": 3}, {"y": 24, "x": 4}, {"y": 17, "x": 5}, {"y": 12, "x": 6}, {"y": 2, "x": 7}, {"y": 17, "x": 8}, {"y": 41, "x": 9}, {"y": 2, "x": 10}, {"y": 28, "x": 11}, {"y": 4, "x": 12}, {"y": 2, "x": 13}, {"y": 3, "x": 14}, {"y": 3, "x": 15}, {"y": 12, "x": 16}, {"y": 2, "x": 17}, {"y": 5, "x": 18}, {"y": 1, "x": 19}, {"y": 19, "x": 20}, {"y": 35, "x": 21}, {"y": 13, "x": 22}, {"y": 2, "x": 23}, {"y": 17, "x": 24}, {"y": 27, "x": 25}, {"y": 16, "x": 26}, {"y": 18, "x": 27}, {"y": 2, "x": 28}, {"y": 0, "x": 29}, {"y": 1, "x": 30}, {"y": 3, "x": 31}, {"y": 2, "x": 32}, {"y": 13, "x": 33}, {"y": 1, "x": 34}, {"y": 16, "x": 35}, {"y": 1, "x": 36}, {"y": 26, "x": 37}, {"y": 0, "x": 38}, {"y": 32, "x": 39}, {"y": 1, "x": 40}, {"y": 0, "x": 41}, {"y": 1, "x": 42}, {"y": 1, "x": 43}, {"y": 4, "x": 44}, {"y": 4, "x": 45}, {"y": 2, "x": 46}, {"y": 1, "x": 47}, {"y": 2, "x": 48}], "name": "The Submarines"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 37, "x": 2}, {"y": 28, "x": 3}, {"y": 22, "x": 4}, {"y": 8, "x": 5}, {"y": 2, "x": 6}, {"y": 3, "x": 7}, {"y": 11, "x": 8}, {"y": 13, "x": 9}, {"y": 1, "x": 10}, {"y": 45, "x": 11}, {"y": 20, "x": 12}, {"y": 9, "x": 13}, {"y": 1, "x": 14}, {"y": 17, "x": 15}, {"y": 18, "x": 16}, {"y": 2, "x": 17}, {"y": 0, "x": 18}, {"y": 3, "x": 19}, {"y": 18, "x": 20}, {"y": 55, "x": 21}, {"y": 39, "x": 22}, {"y": 36, "x": 23}, {"y": 17, "x": 24}, {"y": 50, "x": 25}, {"y": 17, "x": 26}, {"y": 25, "x": 27}, {"y": 22, "x": 28}, {"y": 11, "x": 29}, {"y": 16, "x": 30}, {"y": 2, "x": 31}, {"y": 7, "x": 32}, {"y": 20, "x": 33}, {"y": 5, "x": 34}, {"y": 3, "x": 35}, {"y": 9, "x": 36}, {"y": 8, "x": 37}, {"y": 17, "x": 38}, {"y": 9, "x": 39}, {"y": 15, "x": 40}, {"y": 0, "x": 41}, {"y": 0, "x": 42}, {"y": 0, "x": 43}, {"y": 2, "x": 44}, {"y": 6, "x": 45}, {"y": 3, "x": 46}, {"y": 9, "x": 47}, {"y": 1, "x": 48}], "name": "Ingrid Michaelson"}, {"values": [{"y": 56, "x": 0}, {"y": 32, "x": 1}, {"y": 49, "x": 2}, {"y": 50, "x": 3}, {"y": 24, "x": 4}, {"y": 22, "x": 5}, {"y": 3, "x": 6}, {"y": 7, "x": 7}, {"y": 9, "x": 8}, {"y": 33, "x": 9}, {"y": 3, "x": 10}, {"y": 6, "x": 11}, {"y": 2, "x": 12}, {"y": 3, "x": 13}, {"y": 1, "x": 14}, {"y": 6, "x": 15}, {"y": 5, "x": 16}, {"y": 2, "x": 17}, {"y": 2, "x": 18}, {"y": 0, "x": 19}, {"y": 9, "x": 20}, {"y": 8, "x": 21}, {"y": 28, "x": 22}, {"y": 4, "x": 23}, {"y": 21, "x": 24}, {"y": 14, "x": 25}, {"y": 15, "x": 26}, {"y": 7, "x": 27}, {"y": 4, "x": 28}, {"y": 13, "x": 29}, {"y": 4, "x": 30}, {"y": 2, "x": 31}, {"y": 7, "x": 32}, {"y": 6, "x": 33}, {"y": 0, "x": 34}, {"y": 2, "x": 35}, {"y": 64, "x": 36}, {"y": 26, "x": 37}, {"y": 2, "x": 38}, {"y": 60, "x": 39}, {"y": 22, "x": 40}, {"y": 0, "x": 41}, {"y": 2, "x": 42}, {"y": 0, "x": 43}, {"y": 2, "x": 44}, {"y": 4, "x": 45}, {"y": 0, "x": 46}, {"y": 4, "x": 47}, {"y": 0, "x": 48}], "name": "Death Cab for Cutie"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 0, "x": 3}, {"y": 0, "x": 4}, {"y": 0, "x": 5}, {"y": 0, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 0, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 0, "x": 12}, {"y": 0, "x": 13}, {"y": 0, "x": 14}, {"y": 0, "x": 15}, {"y": 0, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 137, "x": 19}, {"y": 59, "x": 20}, {"y": 65, "x": 21}, {"y": 20, "x": 22}, {"y": 3, "x": 23}, {"y": 44, "x": 24}, {"y": 34, "x": 25}, {"y": 33, "x": 26}, {"y": 67, "x": 27}, {"y": 40, "x": 28}, {"y": 9, "x": 29}, {"y": 14, "x": 30}, {"y": 0, "x": 31}, {"y": 16, "x": 32}, {"y": 25, "x": 33}, {"y": 18, "x": 34}, {"y": 18, "x": 35}, {"y": 19, "x": 36}, {"y": 16, "x": 37}, {"y": 13, "x": 38}, {"y": 16, "x": 39}, {"y": 6, "x": 40}, {"y": 0, "x": 41}, {"y": 2, "x": 42}, {"y": 0, "x": 43}, {"y": 14, "x": 44}, {"y": 17, "x": 45}, {"y": 1, "x": 46}, {"y": 1, "x": 47}, {"y": 0, "x": 48}], "name": "Mumford & Sons"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 2, "x": 3}, {"y": 23, "x": 4}, {"y": 19, "x": 5}, {"y": 4, "x": 6}, {"y": 8, "x": 7}, {"y": 39, "x": 8}, {"y": 65, "x": 9}, {"y": 5, "x": 10}, {"y": 21, "x": 11}, {"y": 0, "x": 12}, {"y": 13, "x": 13}, {"y": 21, "x": 14}, {"y": 121, "x": 15}, {"y": 54, "x": 16}, {"y": 15, "x": 17}, {"y": 58, "x": 18}, {"y": 23, "x": 19}, {"y": 31, "x": 20}, {"y": 5, "x": 21}, {"y": 54, "x": 22}, {"y": 20, "x": 23}, {"y": 23, "x": 24}, {"y": 27, "x": 25}, {"y": 12, "x": 26}, {"y": 22, "x": 27}, {"y": 12, "x": 28}, {"y": 5, "x": 29}, {"y": 3, "x": 30}, {"y": 0, "x": 31}, {"y": 4, "x": 32}, {"y": 10, "x": 33}, {"y": 11, "x": 34}, {"y": 9, "x": 35}, {"y": 3, "x": 36}, {"y": 0, "x": 37}, {"y": 3, "x": 38}, {"y": 19, "x": 39}, {"y": 0, "x": 40}, {"y": 0, "x": 41}, {"y": 0, "x": 42}, {"y": 0, "x": 43}, {"y": 12, "x": 44}, {"y": 3, "x": 45}, {"y": 2, "x": 46}, {"y": 0, "x": 47}, {"y": 1, "x": 48}], "name": "Eisley"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 36, "x": 3}, {"y": 7, "x": 4}, {"y": 7, "x": 5}, {"y": 3, "x": 6}, {"y": 0, "x": 7}, {"y": 3, "x": 8}, {"y": 23, "x": 9}, {"y": 30, "x": 10}, {"y": 18, "x": 11}, {"y": 27, "x": 12}, {"y": 0, "x": 13}, {"y": 2, "x": 14}, {"y": 5, "x": 15}, {"y": 1, "x": 16}, {"y": 1, "x": 17}, {"y": 1, "x": 18}, {"y": 13, "x": 19}, {"y": 11, "x": 20}, {"y": 9, "x": 21}, {"y": 12, "x": 22}, {"y": 18, "x": 23}, {"y": 7, "x": 24}, {"y": 1, "x": 25}, {"y": 6, "x": 26}, {"y": 13, "x": 27}, {"y": 24, "x": 28}, {"y": 31, "x": 29}, {"y": 1, "x": 30}, {"y": 2, "x": 31}, {"y": 9, "x": 32}, {"y": 4, "x": 33}, {"y": 62, "x": 34}, {"y": 107, "x": 35}, {"y": 3, "x": 36}, {"y": 24, "x": 37}, {"y": 14, "x": 38}, {"y": 29, "x": 39}, {"y": 3, "x": 40}, {"y": 0, "x": 41}, {"y": 47, "x": 42}, {"y": 3, "x": 43}, {"y": 3, "x": 44}, {"y": 4, "x": 45}, {"y": 21, "x": 46}, {"y": 171, "x": 47}, {"y": 162, "x": 48}], "name": "Radical Face"}, {"values": [{"y": 28, "x": 0}, {"y": 33, "x": 1}, {"y": 28, "x": 2}, {"y": 12, "x": 3}, {"y": 9, "x": 4}, {"y": 18, "x": 5}, {"y": 4, "x": 6}, {"y": 18, "x": 7}, {"y": 6, "x": 8}, {"y": 16, "x": 9}, {"y": 5, "x": 10}, {"y": 8, "x": 11}, {"y": 1, "x": 12}, {"y": 1, "x": 13}, {"y": 1, "x": 14}, {"y": 3, "x": 15}, {"y": 1, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 37, "x": 19}, {"y": 95, "x": 20}, {"y": 43, "x": 21}, {"y": 27, "x": 22}, {"y": 2, "x": 23}, {"y": 9, "x": 24}, {"y": 19, "x": 25}, {"y": 7, "x": 26}, {"y": 21, "x": 27}, {"y": 5, "x": 28}, {"y": 14, "x": 29}, {"y": 7, "x": 30}, {"y": 37, "x": 31}, {"y": 19, "x": 32}, {"y": 18, "x": 33}, {"y": 1, "x": 34}, {"y": 0, "x": 35}, {"y": 31, "x": 36}, {"y": 46, "x": 37}, {"y": 27, "x": 38}, {"y": 48, "x": 39}, {"y": 28, "x": 40}, {"y": 0, "x": 41}, {"y": 12, "x": 42}, {"y": 9, "x": 43}, {"y": 5, "x": 44}, {"y": 19, "x": 45}, {"y": 26, "x": 46}, {"y": 1, "x": 47}, {"y": 12, "x": 48}], "name": "Arcade Fire"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 0, "x": 3}, {"y": 0, "x": 4}, {"y": 0, "x": 5}, {"y": 0, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 0, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 0, "x": 12}, {"y": 0, "x": 13}, {"y": 0, "x": 14}, {"y": 0, "x": 15}, {"y": 0, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 0, "x": 19}, {"y": 0, "x": 20}, {"y": 0, "x": 21}, {"y": 0, "x": 22}, {"y": 0, "x": 23}, {"y": 0, "x": 24}, {"y": 0, "x": 25}, {"y": 0, "x": 26}, {"y": 0, "x": 27}, {"y": 0, "x": 28}, {"y": 0, "x": 29}, {"y": 0, "x": 30}, {"y": 0, "x": 31}, {"y": 0, "x": 32}, {"y": 0, "x": 33}, {"y": 0, "x": 34}, {"y": 0, "x": 35}, {"y": 0, "x": 36}, {"y": 0, "x": 37}, {"y": 472, "x": 38}, {"y": 204, "x": 39}, {"y": 22, "x": 40}, {"y": 1, "x": 41}, {"y": 2, "x": 42}, {"y": 1, "x": 43}, {"y": 6, "x": 44}, {"y": 25, "x": 45}, {"y": 41, "x": 46}, {"y": 9, "x": 47}, {"y": 49, "x": 48}], "name": "Emancipator"}, {"values": [{"y": 7, "x": 0}, {"y": 2, "x": 1}, {"y": 2, "x": 2}, {"y": 1, "x": 3}, {"y": 1, "x": 4}, {"y": 1, "x": 5}, {"y": 1, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 2, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 1, "x": 12}, {"y": 0, "x": 13}, {"y": 0, "x": 14}, {"y": 0, "x": 15}, {"y": 0, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 1, "x": 19}, {"y": 0, "x": 20}, {"y": 0, "x": 21}, {"y": 4, "x": 22}, {"y": 2, "x": 23}, {"y": 33, "x": 24}, {"y": 2, "x": 25}, {"y": 49, "x": 26}, {"y": 16, "x": 27}, {"y": 2, "x": 28}, {"y": 3, "x": 29}, {"y": 2, "x": 30}, {"y": 26, "x": 31}, {"y": 20, "x": 32}, {"y": 18, "x": 33}, {"y": 41, "x": 34}, {"y": 2, "x": 35}, {"y": 3, "x": 36}, {"y": 42, "x": 37}, {"y": 20, "x": 38}, {"y": 51, "x": 39}, {"y": 8, "x": 40}, {"y": 36, "x": 41}, {"y": 26, "x": 42}, {"y": 67, "x": 43}, {"y": 180, "x": 44}, {"y": 64, "x": 45}, {"y": 34, "x": 46}, {"y": 2, "x": 47}, {"y": 94, "x": 48}], "name": "The National"}, {"values": [{"y": 77, "x": 0}, {"y": 67, "x": 1}, {"y": 67, "x": 2}, {"y": 56, "x": 3}, {"y": 50, "x": 4}, {"y": 29, "x": 5}, {"y": 17, "x": 6}, {"y": 13, "x": 7}, {"y": 14, "x": 8}, {"y": 32, "x": 9}, {"y": 74, "x": 10}, {"y": 32, "x": 11}, {"y": 5, "x": 12}, {"y": 4, "x": 13}, {"y": 9, "x": 14}, {"y": 51, "x": 15}, {"y": 7, "x": 16}, {"y": 7, "x": 17}, {"y": 1, "x": 18}, {"y": 0, "x": 19}, {"y": 1, "x": 20}, {"y": 31, "x": 21}, {"y": 11, "x": 22}, {"y": 16, "x": 23}, {"y": 19, "x": 24}, {"y": 33, "x": 25}, {"y": 9, "x": 26}, {"y": 4, "x": 27}, {"y": 6, "x": 28}, {"y": 3, "x": 29}, {"y": 4, "x": 30}, {"y": 6, "x": 31}, {"y": 5, "x": 32}, {"y": 6, "x": 33}, {"y": 0, "x": 34}, {"y": 13, "x": 35}, {"y": 3, "x": 36}, {"y": 12, "x": 37}, {"y": 1, "x": 38}, {"y": 4, "x": 39}, {"y": 6, "x": 40}, {"y": 0, "x": 41}, {"y": 0, "x": 42}, {"y": 0, "x": 43}, {"y": 3, "x": 44}, {"y": 2, "x": 45}, {"y": 1, "x": 46}, {"y": 0, "x": 47}, {"y": 0, "x": 48}], "name": "Muse"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 39, "x": 3}, {"y": 152, "x": 4}, {"y": 51, "x": 5}, {"y": 31, "x": 6}, {"y": 7, "x": 7}, {"y": 41, "x": 8}, {"y": 35, "x": 9}, {"y": 22, "x": 10}, {"y": 17, "x": 11}, {"y": 2, "x": 12}, {"y": 3, "x": 13}, {"y": 75, "x": 14}, {"y": 6, "x": 15}, {"y": 4, "x": 16}, {"y": 14, "x": 17}, {"y": 0, "x": 18}, {"y": 14, "x": 19}, {"y": 19, "x": 20}, {"y": 1, "x": 21}, {"y": 32, "x": 22}, {"y": 20, "x": 23}, {"y": 9, "x": 24}, {"y": 7, "x": 25}, {"y": 18, "x": 26}, {"y": 18, "x": 27}, {"y": 11, "x": 28}, {"y": 4, "x": 29}, {"y": 4, "x": 30}, {"y": 3, "x": 31}, {"y": 4, "x": 32}, {"y": 19, "x": 33}, {"y": 38, "x": 34}, {"y": 2, "x": 35}, {"y": 12, "x": 36}, {"y": 26, "x": 37}, {"y": 8, "x": 38}, {"y": 30, "x": 39}, {"y": 17, "x": 40}, {"y": 6, "x": 41}, {"y": 32, "x": 42}, {"y": 31, "x": 43}, {"y": 32, "x": 44}, {"y": 6, "x": 45}, {"y": 1, "x": 46}, {"y": 1, "x": 47}, {"y": 12, "x": 48}], "name": "Metric"}, {"values": [{"y": 0, "x": 0}, {"y": 0, "x": 1}, {"y": 0, "x": 2}, {"y": 0, "x": 3}, {"y": 0, "x": 4}, {"y": 0, "x": 5}, {"y": 0, "x": 6}, {"y": 0, "x": 7}, {"y": 0, "x": 8}, {"y": 0, "x": 9}, {"y": 0, "x": 10}, {"y": 0, "x": 11}, {"y": 0, "x": 12}, {"y": 0, "x": 13}, {"y": 0, "x": 14}, {"y": 0, "x": 15}, {"y": 0, "x": 16}, {"y": 0, "x": 17}, {"y": 0, "x": 18}, {"y": 0, "x": 19}, {"y": 0, "x": 20}, {"y": 0, "x": 21}, {"y": 0, "x": 22}, {"y": 0, "x": 23}, {"y": 0, "x": 24}, {"y": 0, "x": 25}, {"y": 0, "x": 26}, {"y": 0, "x": 27}, {"y": 0, "x": 28}, {"y": 23, "x": 29}, {"y": 56, "x": 30}, {"y": 158, "x": 31}, {"y": 280, "x": 32}, {"y": 49, "x": 33}, {"y": 52, "x": 34}, {"y": 62, "x": 35}, {"y": 42, "x": 36}, {"y": 74, "x": 37}, {"y": 102, "x": 38}, {"y": 60, "x": 39}, {"y": 69, "x": 40}, {"y": 0, "x": 41}, {"y": 28, "x": 42}, {"y": 3, "x": 43}, {"y": 44, "x": 44}, {"y": 2, "x": 45}, {"y": 37, "x": 46}, {"y": 0, "x": 47}, {"y": 24, "x": 48}], "name": "Noah and the Whale"}, {"values": [{"y": 56, "x": 0}, {"y": 35, "x": 1}, {"y": 27, "x": 2}, {"y": 29, "x": 3}, {"y": 20, "x": 4}, {"y": 20, "x": 5}, {"y": 9, "x": 6}, {"y": 0, "x": 7}, {"y": 7, "x": 8}, {"y": 19, "x": 9}, {"y": 14, "x": 10}, {"y": 16, "x": 11}, {"y": 9, "x": 12}, {"y": 3, "x": 13}, {"y": 4, "x": 14}, {"y": 36, "x": 15}, {"y": 7, "x": 16}, {"y": 1, "x": 17}, {"y": 21, "x": 18}, {"y": 22, "x": 19}, {"y": 0, "x": 20}, {"y": 19, "x": 21}, {"y": 20, "x": 22}, {"y": 17, "x": 23}, {"y": 16, "x": 24}, {"y": 26, "x": 25}, {"y": 17, "x": 26}, {"y": 1, "x": 27}, {"y": 3, "x": 28}, {"y": 9, "x": 29}, {"y": 1, "x": 30}, {"y": 4, "x": 31}, {"y": 6, "x": 32}, {"y": 183, "x": 33}, {"y": 159, "x": 34}, {"y": 38, "x": 35}, {"y": 91, "x": 36}, {"y": 49, "x": 37}, {"y": 27, "x": 38}, {"y": 122, "x": 39}, {"y": 50, "x": 40}, {"y": 9, "x": 41}, {"y": 21, "x": 42}, {"y": 1, "x": 43}, {"y": 12, "x": 44}, {"y": 22, "x": 45}, {"y": 18, "x": 46}, {"y": 10, "x": 47}, {"y": 9, "x": 48}], "name": "Beirut"}, {"values": [{"y": 45, "x": 0}, {"y": 27, "x": 1}, {"y": 15, "x": 2}, {"y": 26, "x": 3}, {"y": 7, "x": 4}, {"y": 9, "x": 5}, {"y": 1, "x": 6}, {"y": 0, "x": 7}, {"y": 32, "x": 8}, {"y": 59, "x": 9}, {"y": 51, "x": 10}, {"y": 51, "x": 11}, {"y": 13, "x": 12}, {"y": 9, "x": 13}, {"y": 3, "x": 14}, {"y": 5, "x": 15}, {"y": 12, "x": 16}, {"y": 5, "x": 17}, {"y": 2, "x": 18}, {"y": 2, "x": 19}, {"y": 2, "x": 20}, {"y": 55, "x": 21}, {"y": 19, "x": 22}, {"y": 13, "x": 23}, {"y": 22, "x": 24}, {"y": 20, "x": 25}, {"y": 22, "x": 26}, {"y": 41, "x": 27}, {"y": 6, "x": 28}, {"y": 35, "x": 29}, {"y": 4, "x": 30}, {"y": 7, "x": 31}, {"y": 9, "x": 32}, {"y": 8, "x": 33}, {"y": 53, "x": 34}, {"y": 77, "x": 35}, {"y": 1, "x": 36}, {"y": 0, "x": 37}, {"y": 109, "x": 38}, {"y": 298, "x": 39}, {"y": 0, "x": 40}, {"y": 0, "x": 41}, {"y": 31, "x": 42}, {"y": 9, "x": 43}, {"y": 13, "x": 44}, {"y": 67, "x": 45}, {"y": 59, "x": 46}, {"y": 0, "x": 47}, {"y": 24, "x": 48}], "name": "Joe Hisaishi"}, {"values": [{"y": 38, "x": 0}, {"y": 41, "x": 1}, {"y": 97, "x": 2}, {"y": 49, "x": 3}, {"y": 56, "x": 4}, {"y": 100, "x": 5}, {"y": 18, "x": 6}, {"y": 21, "x": 7}, {"y": 18, "x": 8}, {"y": 65, "x": 9}, {"y": 25, "x": 10}, {"y": 16, "x": 11}, {"y": 11, "x": 12}, {"y": 21, "x": 13}, {"y": 68, "x": 14}, {"y": 24, "x": 15}, {"y": 43, "x": 16}, {"y": 1, "x": 17}, {"y": 4, "x": 18}, {"y": 23, "x": 19}, {"y": 48, "x": 20}, {"y": 60, "x": 21}, {"y": 33, "x": 22}, {"y": 15, "x": 23}, {"y": 26, "x": 24}, {"y": 16, "x": 25}, {"y": 28, "x": 26}, {"y": 17, "x": 27}, {"y": 18, "x": 28}, {"y": 4, "x": 29}, {"y": 12, "x": 30}, {"y": 22, "x": 31}, {"y": 6, "x": 32}, {"y": 49, "x": 33}, {"y": 201, "x": 34}, {"y": 31, "x": 35}, {"y": 32, "x": 36}, {"y": 32, "x": 37}, {"y": 28, "x": 38}, {"y": 114, "x": 39}, {"y": 1, "x": 40}, {"y": 16, "x": 41}, {"y": 98, "x": 42}, {"y": 5, "x": 43}, {"y": 17, "x": 44}, {"y": 23, "x": 45}, {"y": 8, "x": 46}, {"y": 8, "x": 47}, {"y": 2, "x": 48}], "name": "Margot & the Nuclear So and So's"}, {"values": [{"y": 159, "x": 0}, {"y": 187, "x": 1}, {"y": 130, "x": 2}, {"y": 158, "x": 3}, {"y": 64, "x": 4}, {"y": 72, "x": 5}, {"y": 36, "x": 6}, {"y": 33, "x": 7}, {"y": 40, "x": 8}, {"y": 49, "x": 9}, {"y": 28, "x": 10}, {"y": 93, "x": 11}, {"y": 19, "x": 12}, {"y": 12, "x": 13}, {"y": 8, "x": 14}, {"y": 23, "x": 15}, {"y": 11, "x": 16}, {"y": 1, "x": 17}, {"y": 29, "x": 18}, {"y": 34, "x": 19}, {"y": 70, "x": 20}, {"y": 141, "x": 21}, {"y": 86, "x": 22}, {"y": 169, "x": 23}, {"y": 34, "x": 24}, {"y": 65, "x": 25}, {"y": 39, "x": 26}, {"y": 24, "x": 27}, {"y": 35, "x": 28}, {"y": 32, "x": 29}, {"y": 1, "x": 30}, {"y": 11, "x": 31}, {"y": 75, "x": 32}, {"y": 20, "x": 33}, {"y": 96, "x": 34}, {"y": 60, "x": 35}, {"y": 14, "x": 36}, {"y": 14, "x": 37}, {"y": 2, "x": 38}, {"y": 113, "x": 39}, {"y": 77, "x": 40}, {"y": 11, "x": 41}, {"y": 10, "x": 42}, {"y": 33, "x": 43}, {"y": 5, "x": 44}, {"y": 13, "x": 45}, {"y": 22, "x": 46}, {"y": 2, "x": 47}, {"y": 3, "x": 48}], "name": "Stars"}];

// key: [month, year] where January is month 0
var stories = {
	//[0, 2009]: 'Began using last.fm',
	"0,2009": 'Began using last.fm',
};

var visiblePopup;
var tooltipHeight = 20;
var tooltipWidth = 120;
var activeStream = null;
var startYear = 2009;

var m = 49; // samples per layer
var width = 3500,
		height = 500,
		mx = m -1,
		my = 1300;

var color = d3.scale.linear()
		.range(["#aad", "#556"]);

var stack = d3.layout.stack()
		.offset("wiggle")
		.values(function(d) { return d.values; });

var area = d3.svg.area()
		.x(function(d) { 
				return d.x * width / mx; 
		})
		.y0(function(d) { 
				output = height - d.y0 * height / my; 
				return output;
		})
		.y1(function(d) { 
				output = height - (d.y + d.y0) * height / my;
				return output;
		})
		.interpolate("basis");

var vis = d3.select("#chart")
	.append("svg")
		.attr("width", width)
		.attr("height", height)
	.on("click", onCanvasClick);

populateXAxis();

// populate graph
vis.selectAll("path")
	.data(stack(layers))
	.enter().append("path")
		.attr("d", function(d) { return area(d.values); })
		.style("fill", function() { return color(Math.random()); })
		.on("mouseover", pathMouseover)
		.on("mouseout", mouseOut)
		.on("click", onStreamClick);

var seekLine = vis.append('line')
	.attr("y1", height - 50)
	.attr("y2", 0)
	.attr("stroke-width", 1)
	.attr("stroke", "#4557A3");
seek(25);

function onCanvasClick(d, i) {
	seek(d3.mouse(this)[0]);
}

function seek(x) {
	seekLine
		.attr("x1", x)	
		.attr("x2", x);

	var monthAndYear = getMonthAndYear(x);
	var info = d3.select('#info')
		.html(stories[monthAndYear.toString()]);
}

function getMonthAndYear(x) {
	var monthWidth = width / m;
	var monthsSinceBeginning = parseInt(x / monthWidth);
	var year = startYear + parseInt(monthsSinceBeginning / 12);
	var month = parseInt(monthsSinceBeginning % 12);
	return [month, year];
}

function onStreamClick(d, i) {
	if(activeStream == null) {
		activeStream = d3.select(this);
		d3.selectAll("path").style('display', 'none');
		activeStream.style('display', 'block');
	}
	else {
		d3.selectAll("path").style('display', 'block');
		activeStream = null;	
	}
}

function mouseOut(d, i) {
	var color = d3.select(this).style('fill');
	var newColor = d3.rgb(color).darker(.3);
	d3.select(this).style("fill", newColor);
	visiblePopup.style("display", "none");
}

function pathMouseover(d, i) {
	var color = d3.select(this).style('fill');
	var newColor = d3.rgb(color).brighter(.3);
	d3.select(this).style("fill", newColor);
	var x = d3.mouse(this)[0];
	var y = d3.mouse(this)[1];
	/*
	if(x > width - tooltipWidth) {
		x = x - tooltipWidth;
	}
	if(y > height / 2) {
		y = y - tooltipHeight;
	}
	*/

	visiblePopup = d3.select(".popup")
		.html('<div class="artist">' + d.name + '</div>')
		.style("min-height", tooltipHeight + "px")
		.style("min-width", tooltipWidth + "px");

	var h = $(".popup").height();
	var w = $(".popup").width();
	visiblePopup
		.style("margin-left", (x - w - 14)+"px") // -9 for padding
		.style("margin-top", (y - h - 14)+"px")
		.style("display", "block");
}

function populateXAxis() {
	var step = width / m;
	var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

	var month = 0;
	var year = 2009;

	var printMonth = true;

	for(var x = 0; x < width; x += step) {
		vis.append('line')
			.attr("x1", x)	
			.attr("x2", x)
			.attr("y1", height - 50)
			.attr("y2", 0)
			.attr("stroke-width", .7)
			.attr("stroke", "#DBD5D7");

		// print every other month
		if(printMonth) {
			vis.append('text')
				.text(months[month])
				.attr("x", x).attr("y", height - 30)
				.style('font-size', '10pt');
			printMonth = false;
		}
		else {
			printMonth = true;
		}
		month = (month + 1) % 12;
	}

	var yearStep = width / 4;
	for(var x = 0; x < width; x += yearStep) {
		vis.append('text')
			.text(year)
			.attr("x", x).attr("y", height - 5)
			.style('font-size', '18pt');

		year++;
	}
}